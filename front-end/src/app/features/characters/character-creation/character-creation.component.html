Character creation
<mat-stepper #stepper>
  <mat-step [stepControl]="createFormGroup" errorMessage="Your name shall not be empty.">
    <form [formGroup]="createFormGroup">
      <ng-template matStepLabel>Choose your character's name and level</ng-template>
      <mat-form-field>
        <mat-label>Name</mat-label>
        <input type="text" [minlength]="3" [maxlength]="50" matInput placeholder="Name"
         formControlName="name" required>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Level</mat-label>
        <input type="number" [min]="1" [max]="20" matInput placeholder="Level" formControlName="level" required>
      </mat-form-field>
        <div>
          <button mat-button matStepperNext>Next</button>
        </div>
    </form>
  </mat-step>
    <mat-step [stepControl]="createFormGroup" errorMessage="You have to distribute your stats.">
      <mat-form-field>
        <mat-label>Stats choosing type:</mat-label>
        <mat-select matInput [(value)]="statsType" placeholder="Choose your type of stats select">
          <mat-option value="Custom">Custom</mat-option>
          <mat-option value="Point buy" (onSelectionChange)="preparePointBuy()">Point buy</mat-option>
          <mat-option value="Roll" (onSelectionChange)="prepareRandomRoll()">Roll 4d6 drop lowest</mat-option>
        </mat-select>
      </mat-form-field>
      @if (isPointBuy()) {
        <mat-label>Stat points: {{statPoints}}</mat-label>
      }
      @if (isRoll()) {
        <button mat-button (click)="rollStats()">Reroll stats</button>
      }
      <form [formGroup]="createFormGroup">
        <ng-template matStepLabel>Choose your stats</ng-template>
        <mat-form-field>
          <mat-label>Strength</mat-label>
           @if (isRoll()) {
            <mat-select [(value)]="strength.value" (selectionChange)="chooseRoll(strength)" required>
                @for (item of strength.options; track $index) {
                  <mat-option [value]="item">
                    {{item}}
                  </mat-option>
                }
                <mat-option [value]="strength.prevValue" [ariaSelected]="true">
                  {{strength.prevValue}}
                </mat-option>
              </mat-select>
              } @else {
                <input type="number" matInput [min]="8" [max]="20" placeholder="strength"
                  [value]="strength.value" required [readonly]="isNotCustom()">
                @if (isPointBuy()) {
                <button mat-button [color]='upDownButtonHolderColor' (click)='increment(strength)'>
                  <mat-icon>keyboard_arrow_up</mat-icon>
                </button>
                <button mat-button [color]='upDownButtonHolderColor' (click)='decrement(strength)'>
                  <mat-icon>keyboard_arrow_down</mat-icon>
                </button>
              }
           }
        </mat-form-field>
        <mat-form-field>
          <mat-label>Dexterity</mat-label>
           @if (isRoll()) {
            <mat-select [(value)]="dexterity.value" (selectionChange)="chooseRoll(dexterity)" required>
                @for (item of dexterity.options; track $index) {
                  <mat-option [value]="item">
                    {{item}}
                  </mat-option>
                }
                <mat-option [value]="dexterity.prevValue" [ariaSelected]="true">
                  {{dexterity.prevValue}}
                </mat-option>
              </mat-select>
              } @else {
                <input type="number" matInput [min]="8" [max]="20" placeholder="dexterity"
                  [value]="dexterity.value" required [readonly]="isNotCustom()">
                @if (isPointBuy()) {
                <button mat-button [color]='upDownButtonHolderColor' (click)='increment(dexterity)'>
                  <mat-icon>keyboard_arrow_up</mat-icon>
                </button>
                <button mat-button [color]='upDownButtonHolderColor' (click)='decrement(dexterity)'>
                  <mat-icon>keyboard_arrow_down</mat-icon>
                </button>
              }
           }
        </mat-form-field>
        <mat-form-field>
          <mat-label>Constitution</mat-label>
           @if (isRoll()) {
            <mat-select [(value)]="constitution.value" (selectionChange)="chooseRoll(constitution)" required>
                @for (item of constitution.options; track $index) {
                  <mat-option [value]="item">
                    {{item}}
                  </mat-option>
                }
                <mat-option [value]="constitution.prevValue" [ariaSelected]="true">
                  {{constitution.prevValue}}
                </mat-option>
              </mat-select>
              } @else {
                <input type="number" matInput [min]="8" [max]="20" placeholder="constitution"
                  [value]="constitution.value" required [readonly]="isNotCustom()">
                @if (isPointBuy()) {
                <button mat-button [color]='upDownButtonHolderColor' (click)='increment(constitution)'>
                  <mat-icon>keyboard_arrow_up</mat-icon>
                </button>
                <button mat-button [color]='upDownButtonHolderColor' (click)='decrement(constitution)'>
                  <mat-icon>keyboard_arrow_down</mat-icon>
                </button>
              }
           }
        </mat-form-field>
        <mat-form-field>
          <mat-label>Intelligence</mat-label>
           @if (isRoll()) {
            <mat-select [(value)]="intelligence.value" (selectionChange)="chooseRoll(intelligence)" required>
                @for (item of intelligence.options; track $index) {
                  <mat-option [value]="item">
                    {{item}}
                  </mat-option>
                }
                <mat-option [value]="intelligence.prevValue" [ariaSelected]="true">
                  {{intelligence.prevValue}}
                </mat-option>
              </mat-select>
              } @else {
                <input type="number" matInput [min]="8" [max]="20" placeholder="intelligence"
                  [value]="intelligence.value" required [readonly]="isNotCustom()">
                @if (isPointBuy()) {
                <button mat-button [color]='upDownButtonHolderColor' (click)='increment(intelligence)'>
                  <mat-icon>keyboard_arrow_up</mat-icon>
                </button>
                <button mat-button [color]='upDownButtonHolderColor' (click)='decrement(intelligence)'>
                  <mat-icon>keyboard_arrow_down</mat-icon>
                </button>
              }
           }
        </mat-form-field>
        <mat-form-field>
          <mat-label>Wisdom</mat-label>
           @if (isRoll()) {
            <mat-select [(value)]="wisdom.value" (selectionChange)="chooseRoll(wisdom)" required>
                @for (item of wisdom.options; track $index) {
                  <mat-option [value]="item">
                    {{item}}
                  </mat-option>
                }
                <mat-option [value]="wisdom.prevValue" [ariaSelected]="true">
                  {{wisdom.prevValue}}
                </mat-option>
              </mat-select>
              } @else {
                <input type="number" matInput [min]="8" [max]="20" placeholder="Wisdom"
                  [value]="wisdom.value" required [readonly]="isNotCustom()">
                @if (isPointBuy()) {
                <button mat-button [color]='upDownButtonHolderColor' (click)='increment(wisdom)'>
                  <mat-icon>keyboard_arrow_up</mat-icon>
                </button>
                <button mat-button [color]='upDownButtonHolderColor' (click)='decrement(wisdom)'>
                  <mat-icon>keyboard_arrow_down</mat-icon>
                </button>
              }
           }
        </mat-form-field>
        <mat-form-field>
          <mat-label>Charisma</mat-label>
          @if (isRoll()) {
            <mat-select [title]="charisma.value" (selectionChange)="chooseRoll(charisma)" required>
                @for (item of charisma.options; track $index) {
                  <mat-option [value]="item">
                    {{item}}
                  </mat-option>
                }
                <mat-option [value]="charisma.prevValue" [ariaSelected]="true">
                  {{charisma.prevValue}}
                </mat-option>
              </mat-select>
          } @else {
            <input type="number" matInput [min]="8" [max]="20" placeholder="Charisma"
              [value]="charisma.value" required [readonly]="isNotCustom()">
            @if (isPointBuy()) {
              <button mat-button [color]='upDownButtonHolderColor' (click)='increment(charisma)'>
                <mat-icon>keyboard_arrow_up</mat-icon>
              </button>
              <button mat-button [color]='upDownButtonHolderColor' (click)='decrement(charisma)'>
                <mat-icon>keyboard_arrow_down</mat-icon>
              </button>
            }
          }
           
        </mat-form-field>
          <div>
            <button mat-button matStepperNext>Next</button>
          </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="createFormGroup" errorMessage="Class is required.">
      <form [formGroup]="createFormGroup">
        <ng-template matStepLabel>Choose your class</ng-template>
        <mat-form-field class="card">
          
          <mat-card appearance="outlined">
            <mat-card-header>
              <mat-card-title>
                
          <mat-label>Class</mat-label>
          <mat-select matInput (selectionChange)="loadDndClass()" [(value)]="selectedClass.name" placeholder="Class">
                 @for (item of classList; track $index) {
                  <mat-option value="{{item.name}}">
                    {{item.name}}
                  </mat-option>
                 }
          </mat-select>
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <mat-list role="list">
                    <mat-list-item role="listitem">HitDice: {{selectedClass.hitDice}}</mat-list-item>
                    <mat-list-item role="listitem">Description: {{selectedClass.description}}</mat-list-item>
                </mat-list>
            </mat-card-content>
          </mat-card>
        </mat-form-field>
        <br>
          <mat-card appearance="outlined" class="card">
            <mat-card-header>
              <mat-card-title>
                Proficiencies
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <mat-list role="list">
                  <mat-list-item role="listitem">Languages:
                    @for (item of languages; track $index) {
                      {{item.name}}@if ($index+1<languages.length) {, }
                    }
                  </mat-list-item>
                    <mat-list-item role="listitem">Armors:
                       @for (item of armors; track $index) {
                        {{item.name}}@if ($index+1<armors.length) {, }
                       }
                      </mat-list-item>
                    <mat-list-item role="listitem">Weapons:
                      @for (item of weapons; track $index) {
                        {{item.name}}@if ($index+1<armors.length) {, }
                      }
                    </mat-list-item>
                    <mat-list-item role="listitem">Tools:
                      @for (item of tools; track $index) {
                        {{item.name}}@if ($index+1<tools.length) {, }
                      }
                    </mat-list-item>
                </mat-list>
            </mat-card-content>
          </mat-card>
          Skills:
          <section>
            @for (item of skills; track $index) {
              <div class="proficiency-group">
                <mat-checkbox (change)="addProf(item)">
                  {{item.name}}
                </mat-checkbox>
                @if (checkIfSelected(item)) {
                  <mat-checkbox (change)="addExpertise(item)">
                    Expertise
                  </mat-checkbox>}
              </div>
            }
          </section>
        <div>
          <button mat-button matStepperPrevious>Back</button>
          <button mat-button matStepperNext>Next</button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="createFormGroup">
      <form [formGroup]="createFormGroup">
        <ng-template matStepLabel>Pick your spells</ng-template>
        <h2>Spells</h2>
        <ol>
          @for (savedItem of createFormGroup.controls['spells'].value; track $index) {
              <li>
                <mat-card appearance="outlined">
                  <mat-card-header>
                    <mat-card-title>Spell #{{$index+1}}</mat-card-title>
                  </mat-card-header>
                  <mat-card-content>
                      <mat-list role="list">
                          <mat-list-item role="listitem">Type: {{savedItem.level}}</mat-list-item>
                          <mat-list-item role="listitem">Name: {{savedItem.name}}</mat-list-item>
                      </mat-list>
                  </mat-card-content>
                  <mat-card-actions>
                      <button (click)="remove(savedItem)" mat-button>
                          <mat-icon>
                              delete
                          </mat-icon>
                      </button>
                  </mat-card-actions>
                </mat-card>
              </li>
          }
      </ol>
        <mat-card appearance="outlined">
          <mat-card-header>
            <mat-card-title>Spell:</mat-card-title>
          </mat-card-header>
          <mat-card-content>
              <mat-form-field>
                          <mat-label>Level:</mat-label>
                          <mat-select [(value)]="spellLevel" (selectionChange)="setLevel()">
                                <mat-option [value]="0">Cantrip</mat-option>
                                <mat-option [value]="1">Lvl 1</mat-option>
                                <mat-option [value]="2">Lvl 2</mat-option>
                                <mat-option [value]="3">Lvl 3</mat-option>
                                <mat-option [value]="4">Lvl 4</mat-option>
                                <mat-option [value]="5">Lvl 5</mat-option>
                                <mat-option [value]="6">Lvl 6</mat-option>
                                <mat-option [value]="7">Lvl 7</mat-option>
                                <mat-option [value]="8">Lvl 8</mat-option>
                                <mat-option [value]="9">Lvl 9</mat-option>
                          </mat-select>
                  </mat-form-field>
              <mat-form-field>
                  <mat-label>Name:</mat-label>
                  <mat-select [(value)]="spellName" (selectionChange)="setName()">
                  @for (item of nameList; track $index) {
                      <mat-option [value]="item">
                          {{item}}
                      </mat-option>
                  }
                  </mat-select>
              </mat-form-field>
          </mat-card-content>
          <mat-card-actions>
              <button mat-button [disabled]="disabled" (click)="addSpell()">
                  <mat-icon>
                      save
                  </mat-icon>
              </button>
          </mat-card-actions>
        </mat-card>
      </form>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Done</ng-template>
      <p>You are now done.</p>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="submit()" [disabled]="!createFormGroup.valid">Sumbit</button>
      </div>
    </mat-step>
  </mat-stepper>